<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8>
<title>LAIR!</title>
<link rel="stylesheet" href="style.css">
<script src="script.js"></script>
</head>
<ul>
<li><a href="index.html">home</a></li>
</ul>
<ul>
<li><a href="info.html">info</a></li>
</ul>
<ul>
<li><a href="maps.html">maps</a></li>
</ul>
<ul>
<li><a href="mobs.html">ai</a></li>
</ul>
<ul>
<li><a href="license.html">license</a></li>
</ul>
<ul>
<li><a href="art/art.html">art</a></li>
</ul>
<ul>
<li><a href="blog/blog.html">blog</a></li>
</ul>
<h1>LAIR's Lua-Based Configuration for Programmable Mob Behavior</h1>

<h2>How to get Environmental Information from the Mob's Point of View in Lua</h2>

<p>Every time an event occurs, the mob checks a nearby area for things it needs to
be aware of, and it "notices" some details about them by putting them into a
long list of strings and then making those strings accessible in the "vision"
global lua table. Each mob has it's own vision table and the vision table
changes periodically based on the Mob's surroundings.</p>

<p>To see a full listing of the vision table, place the print_seen_details()
function in your ai function in your ai.lua file. Running</p>

<pre><code>    print_seen_details()
</code></pre>

<p>from lua will produce output resembling:</p>

<pre><code>    Printing details about nearby entities:
    ---------------------------------------
      * particle  x:64 y:320 w:32 h:32 skills: speed  exert  dodge  aim  will  resist  magic  tech  tags:blocked wall stone particle  was found at key: 29
      * mobile  x:160 y:224 w:32 h:32 skills: speed  exert  dodge  aim  will  resist  magic  tech  tags:blocked med mobile  was found at key: 1
      * mobile  x:96 y:288 w:32 h:32 skills: speed  exert  dodge  aim  will  resist  magic  tech  tags:blocked med mobile  was found at key: 0
</code></pre>

<p>but much longer. This is the <em>Whole</em> vision table and it's printing the whole
thing, so don't use this in production. It's for testing only. In production,
use the functions I'll be documenting over the next couple days.</p>

<h2>How to get Information about a Mob from the Mob's Point of View in Lua</h2>

<p>A mob also needs to have information about itself to make decisions. It gets
a summary of this in it's self table, and details can be found in the self_*
tables corresponding to your stats.</p>

<p>To see a full listing of the self table and self_* tables, place the
print_self_details() function in your ai function in your ai.lua file. Running</p>

<pre><code>    print_self_details()
</code></pre>

<p>from lua will produce output resembling:</p>

<pre><code>    Printing details about self:
    ----------------------------
      * mobile  x:224 y:64 w:32 h:32 skills: speed  exert  dodge  aim  will  resist  magic  tech  tags:blocked med mobile  was found at key: self
      * 4 was found at key: speed
</code></pre>

<p>It's pretty much safe, but not very useful to view the whole self table in
production scripts. This is mostly for testing and better functions will be
written and documented soon.</p>

<h2>How to Write functions to help your Mob's make Decisions</h2>

<p>TBC.</p>

<h2>What are AI functions</h2>

<p>Unlike Map functions, AI functions are not pre-defined. The dungeon designer
defines AI functions of his own in the ai.lua(or other lua file as directed) on
his or her own and decides the function that each Mobile will use at the</p>

<h2>How AI Functions are decided per-Mobile</h2>

<p>They are set at runtime, during the Mob Placement phase of Map Generation, by
the mob_ai_decide() function.</p>

<h2>AI Function Helpers: Environment Information Gathering</h2>

<p>TBD.</p>

<h2>AI Function Hooks: Making Mobs take Actions</h2>

<p>Will correspond to the move functions for players, mostly.</p>

<h2>AI Examples</h2>

<p>TBD.</p>

<h2>LAIR AI Library</h2>

<p>TBD.</p>
